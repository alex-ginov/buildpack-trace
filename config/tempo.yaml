# Configuration de base du serveur
server:
  http_listen_address: "0.0.0.0"
  http_listen_port: ${PORT} # IMPORTANT : Utiliser la variable PORT fournie par l'environnement
  log_level: info

# Configuration du distributeur (re√ßoit les traces OTLP)
distributor:
  receivers:
    otlp:
      protocols:
        # NOTE : Utiliser 0.0.0.0:${PORT} pour l'HTTP OTLP peut causer des conflits si 
        # le serveur HTTP principal est d√©j√† sur ce port. Il est plus s√ªr de laisser 
        # Tempo g√©rer les ports par d√©faut si possible, ou d'utiliser un port diff√©rent (comme 4318)
        # et de mapper ce port dans Scalingo si vous n'utilisez pas l'√©coute HTTP principale.
        http:
          # Ici, nous laissons le port ${PORT} si vous n'exposez que ce r√©cepteur
          endpoint: "0.0.0.0:${PORT}"
        # Port GRPC OTLP standard, non expos√© par d√©faut
        grpc:
          endpoint: "0.0.0.0:4317"

# Configuration du stockage (backend 'local' pour le stockage sur le disque du conteneur)
storage:
  trace:
    backend: local
    # üö® CORRECTION CRITIQUE : Utiliser /tmp pour l'√©criture
    wal:
      path: /tmp/tempo-data/wal 
    local:
      path: /tmp/tempo-data/blocks # üö® CORRECTION CRITIQUE : Utiliser /tmp pour l'√©criture

# Configuration du compresseur
compactor:
  compaction:
    block_retention: 24h
    compacted_block_retention: 1h

# Limites
limits:
  max_bytes_per_trace: 1000000